---
import FeedPage from '@/components/blog/FeedPage';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { KitchensinkLayout } from '@/layouts/KitchensinkLayout';
import {
  loadBlogCategoriesServiceConfig,
  loadBlogFeedServiceConfig,
} from '@wix/headless-blog/services';

import './theme.css';
import BlogCategoriesSection from '@/components/blog/BlogCategoriesSection';

const [blogFeedServiceConfig, blogCategoriesServiceConfig] = await Promise.all([
  loadBlogFeedServiceConfig({
    pageSize: 10,
    sort: [
      {
        fieldName: 'firstPublishedDate',
        order: 'DESC',
      },
    ],
  }),
  loadBlogCategoriesServiceConfig(),
]);
---

<BaseLayout>
  <title>Blog | Wix Headless Components</title>
  <meta
    name="description"
    content="Explore our blog featuring the latest insights on headless components, web development, and modern architecture."
  />

  <KitchensinkLayout>
    <div class="min-h-screen bg-background">
      <div class="max-w-6xl mx-auto px-6 py-12">
        <BlogCategoriesSection
          pathname={Astro.url.pathname}
          categoryPageBaseUrl="/blog/example-1/category/"
          blogCategoriesServiceConfig={blogCategoriesServiceConfig}
          allPostsConfig={{
            label: 'All posts',
            href: '/blog/example-1',
            description:
              'Discover the latest insights, tutorials, and best practices for building modern web applications with headless components.',
          }}
        />
        <FeedPage
          client:load
          blogFeedServiceConfig={blogFeedServiceConfig}
          postPageBaseUrl="/blog/example-1/"
          categoryPageBaseUrl="/blog/example-1/category/"
          dateLocale="en-US"
        />
      </div>
    </div>
  </KitchensinkLayout>
</BaseLayout>
